{"version":3,"file":"index.modern.js","sources":["../src/theme.ts","../node_modules/compute-scroll-into-view/dist/index.module.js","../src/use-select.ts","../src/MultiSelect.tsx"],"sourcesContent":["import { mode } from '@chakra-ui/theme-tools'\n\nconst parts = [\n  'item',\n  'selectedItem',\n  'list',\n  'textList',\n  'selectedList',\n  'actionGroup',\n  'control',\n  'input',\n  'button',\n  'groupTitle',\n  'divider',\n  'label',\n]\n\nfunction baseStyleList(props: Record<string, any>) {\n  return {\n    bg: mode(`#fff`, `gray.700`)(props),\n    boxShadow: mode(`sm`, `dark-lg`)(props),\n    color: 'inherit',\n    w: 'full',\n    py: '2',\n    zIndex: 1,\n    borderRadius: 'md',\n    borderWidth: '1px',\n    maxH: '64',\n    overflowY: 'auto',\n    overscrollBehaviorY: 'contain',\n  }\n}\n\nconst baseStyleSelectedList = {\n  d: 'flex',\n  flex: 1,\n  flexWrap: 'wrap',\n  alignItems: 'center',\n}\n\nconst baseStyleLabel = {\n  fontSize: 'md',\n  marginEnd: 3,\n  mb: 2,\n  fontWeight: 'medium',\n  transition: 'all 0.2s',\n  opacity: 1,\n  _disabled: {\n    opacity: 0.4,\n  },\n}\n\nfunction baseStyleItem(props: Record<string, any>) {\n  return {\n    cursor: 'pointer',\n    transition: 'background 50ms ease-out',\n    _focus: {\n      bg: mode(`gray.50`, `whiteAlpha.100`)(props),\n      boxShadow: 'outline',\n    },\n    _active: {\n      bg: mode(`gray.50`, `whiteAlpha.100`)(props),\n    },\n    _expanded: {\n      bg: mode(`gray.50`, `whiteAlpha.100`)(props),\n    },\n    _selected: {\n      bg: mode(`gray.100`, `whiteAlpha.300`)(props),\n    },\n    _disabled: {\n      opacity: 0.4,\n      cursor: 'not-allowed',\n    },\n  }\n}\n\nfunction baseStyleSelectedItem(props: Record<string, any>) {\n  return {\n    borderRadius: 'full',\n    variant: 'solid',\n    colorscheme: props.colorscheme,\n  }\n}\n\nfunction baseStyleButton(props: Record<string, any>) {\n  return {\n    variant: 'ghost',\n    _hover: {\n      bg: mode(`gray.200`, `whiteAlpha.300`)(props),\n    },\n    _focus: {\n      bg: mode(`gray.200`, `whiteAlpha.300`)(props),\n      boxShadow: 'outline',\n    },\n    _active: {\n      bg: mode(`gray.100`, `whiteAlpha.100`)(props),\n    },\n    colorscheme: props.colorscheme,\n  }\n}\n\nconst baseStyleControl = {\n  h: 'auto',\n  minW: 72,\n}\n\n// eslint-disable-next-line\nconst baseStyleInput = (_props: Record<string, any>) => ({\n  bgColor: 'transparent',\n  appearance: 'none',\n  flex: 1,\n  outline: 0,\n})\n\nconst baseStyleActionGroup = {\n  d: 'flex',\n  alignItems: 'center',\n}\n\nconst baseStyleGroupTitle = {\n  fontWeight: 'semibold',\n}\n\nconst baseStyleDivider = {\n  d: 'inline',\n  h: 'full',\n  border: 0,\n  borderColor: 'inherit',\n  my: 1,\n  opacity: 0.8,\n}\n\nconst baseStyle = (props: Record<string, any>) => ({\n  list: baseStyleList(props),\n  selectedList: baseStyleSelectedList,\n  item: baseStyleItem(props),\n  selectedItem: baseStyleSelectedItem(props),\n  button: baseStyleButton(props),\n  actionGroup: baseStyleActionGroup,\n  control: baseStyleControl,\n  input: baseStyleInput(props),\n  groupTitle: baseStyleGroupTitle,\n  divider: baseStyleDivider,\n  label: baseStyleLabel,\n})\n\nexport const sizes = {\n  sm: {\n    control: {\n      minH: 8,\n      px: 1,\n      spacing: 1,\n    },\n    input: {\n      m: 'px',\n    },\n    actionGroup: {\n      spacing: '0',\n    },\n    item: {\n      py: 1,\n      px: 2,\n    },\n    textList: {\n      py: 0,\n      px: 1,\n    },\n    selectedItem: {\n      m: 'px',\n    },\n    selectedList: {\n      py: 'px',\n    },\n    groupTitle: {\n      mx: 2,\n      my: 1,\n      fontSize: 'sm',\n    },\n  },\n  md: {\n    control: {\n      minH: 10,\n      px: 1,\n      spacing: 1,\n    },\n    input: {\n      m: '2px',\n    },\n    actionGroup: {\n      spacing: '0',\n    },\n    item: {\n      py: 2,\n      px: 3,\n    },\n    textList: {\n      p: 1,\n    },\n    selectedItem: {\n      m: '2px',\n    },\n    selectedList: {\n      py: '2px',\n    },\n    groupTitle: {\n      mx: 4,\n      my: 2,\n      fontSize: 'sm',\n    },\n  },\n  lg: {\n    control: {\n      minH: 12,\n      px: 2,\n      spacing: 2,\n    },\n    input: {\n      m: 1,\n    },\n    actionGroup: {\n      spacing: '0',\n    },\n    item: {\n      py: 2,\n      px: 3,\n    },\n    textList: {\n      py: 1,\n      px: 2,\n    },\n    selectedItem: {\n      m: 1,\n    },\n    selectedList: {\n      py: 1,\n    },\n    groupTitle: {\n      mx: 4,\n      my: 2,\n      fontSize: 'sm',\n    },\n  },\n}\n\nexport default {\n  defaultProps: {\n    size: 'md',\n  },\n  parts,\n  sizes,\n  baseStyle,\n}\n","function t(t){return\"object\"==typeof t&&null!=t&&1===t.nodeType}function e(t,e){return(!e||\"hidden\"!==t)&&\"visible\"!==t&&\"clip\"!==t}function n(t,n){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return e(r.overflowY,n)||e(r.overflowX,n)||function(t){var e=function(t){if(!t.ownerDocument||!t.ownerDocument.defaultView)return null;try{return t.ownerDocument.defaultView.frameElement}catch(t){return null}}(t);return!!e&&(e.clientHeight<t.scrollHeight||e.clientWidth<t.scrollWidth)}(t)}return!1}function r(t,e,n,r,i,o,l,d){return o<t&&l>e||o>t&&l<e?0:o<=t&&d<=n||l>=e&&d>=n?o-t-r:l>e&&d<n||o<t&&d>n?l-e+i:0}export default function(e,i){var o=window,l=i.scrollMode,d=i.block,u=i.inline,h=i.boundary,a=i.skipOverflowHiddenElements,c=\"function\"==typeof h?h:function(t){return t!==h};if(!t(e))throw new TypeError(\"Invalid target\");for(var f=document.scrollingElement||document.documentElement,s=[],p=e;t(p)&&c(p);){if((p=p.parentElement)===f){s.push(p);break}null!=p&&p===document.body&&n(p)&&!n(document.documentElement)||null!=p&&n(p,a)&&s.push(p)}for(var m=o.visualViewport?o.visualViewport.width:innerWidth,g=o.visualViewport?o.visualViewport.height:innerHeight,w=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,W=e.getBoundingClientRect(),b=W.height,H=W.width,y=W.top,E=W.right,M=W.bottom,V=W.left,x=\"start\"===d||\"nearest\"===d?y:\"end\"===d?M:y+b/2,I=\"center\"===u?V+H/2:\"end\"===u?E:V,C=[],T=0;T<s.length;T++){var k=s[T],B=k.getBoundingClientRect(),D=B.height,O=B.width,R=B.top,X=B.right,Y=B.bottom,L=B.left;if(\"if-needed\"===l&&y>=0&&V>=0&&M<=g&&E<=m&&y>=R&&M<=Y&&V>=L&&E<=X)return C;var S=getComputedStyle(k),j=parseInt(S.borderLeftWidth,10),q=parseInt(S.borderTopWidth,10),z=parseInt(S.borderRightWidth,10),A=parseInt(S.borderBottomWidth,10),F=0,G=0,J=\"offsetWidth\"in k?k.offsetWidth-k.clientWidth-j-z:0,K=\"offsetHeight\"in k?k.offsetHeight-k.clientHeight-q-A:0;if(f===k)F=\"start\"===d?x:\"end\"===d?x-g:\"nearest\"===d?r(v,v+g,g,q,A,v+x,v+x+b,b):x-g/2,G=\"start\"===u?I:\"center\"===u?I-m/2:\"end\"===u?I-m:r(w,w+m,m,j,z,w+I,w+I+H,H),F=Math.max(0,F+v),G=Math.max(0,G+w);else{F=\"start\"===d?x-R-q:\"end\"===d?x-Y+A+K:\"nearest\"===d?r(R,Y,D,q,A+K,x,x+b,b):x-(R+D/2)+K/2,G=\"start\"===u?I-L-j:\"center\"===u?I-(L+O/2)+J/2:\"end\"===u?I-X+z+J:r(L,X,O,j,z+J,I,I+H,H);var N=k.scrollLeft,P=k.scrollTop;x+=P-(F=Math.max(0,Math.min(P+F,k.scrollHeight-D+K))),I+=N-(G=Math.max(0,Math.min(N+G,k.scrollWidth-O+J)))}C.push({el:k,top:F,left:G})}return C}\n//# sourceMappingURL=index.module.js.map\n","import {\n  usePopper,\n  UsePopperProps,\n  UsePopperReturn,\n  useStyles,\n} from '@chakra-ui/react'\nimport { EventKeys } from '@chakra-ui/utils'\nimport { createContext, mergeRefs } from '@chakra-ui/react-utils'\nimport {\n  useEffect,\n  useRef,\n  useState,\n  useCallback,\n  useMemo,\n  MutableRefObject,\n} from 'react'\nimport computeScrollIntoView from 'compute-scroll-into-view'\n\nexport interface Option {\n  label: string\n  value: string | number\n}\n\nexport interface SelectState {\n  searchValue: string\n  resolvedSearchValue: string\n  isOpen: boolean\n  highlightedIndex: number\n}\n\ntype AnyFunc = (...args: any[]) => any\n\nexport interface KeyMeta {\n  key?: EventKeys\n  keyCode?: EventKeys\n  shift?: boolean\n  meta?: boolean\n}\n\nexport type KeyboardEventHandler = (e: KeyboardEvent) => void\n\nexport type KeyHandler = () => void\n\nexport type ScrollToIndex = (\n  index: number,\n  ref: MutableRefObject<HTMLElement | undefined>,\n  optionsRef: MutableRefObject<HTMLElement | undefined>,\n  enabledRef: MutableRefObject<boolean>\n) => void\n\nexport type GetDebounce = (options: Option[]) => number\n\nexport enum ChangeActions {\n  SingleCreate = 'singleCreate', // eslint-disable-line\n  SingleRemove = 'singleRemove', // eslint-disable-line\n  SingleSelect = 'singleSelect', // eslint-disable-line\n  SingleClear = 'singleClear', // eslint-disable-line\n  MultiCreate = 'multiCreate', // eslint-disable-line\n  MultiRemove = 'multiRemove', // eslint-disable-line\n  MultiSelect = 'multiSelect', // eslint-disable-line\n  MultiClear = 'multiClear', // eslint-disable-line\n}\n\nexport type SelectOnChange = (\n  value: string | number | Array<string | number>,\n  change?: {\n    action: ChangeActions\n    value: any\n  }\n) => void\n\nexport type GetOption = (option: string | { label: string; value: any }) => {\n  label: string\n  value: any\n}\n\nexport type SelectFilter = (\n  options: Option[],\n  searchValue: string | number,\n  getOption: GetOption\n) => Option[]\n\nexport type SelectRemoveValue = (index: number) => void\n\nexport type SelectSetOpen = (open: boolean) => void\n\nexport type SelectSetSearch = (searchValue: string) => void\n\nexport enum SelectActions {\n  SetOpen = 'setOpen', // eslint-disable-line\n  SetSearch = 'setSearch', // eslint-disable-line\n  HighlightIndex = 'highlightIndex', // eslint-disable-line\n}\n\nexport type SelectStateUpdater = (\n  updater: (old: SelectState) => SelectState,\n  action: SelectActions\n) => void\n\nexport type StateReducer = (\n  old: SelectState,\n  newState: SelectState,\n  action: SelectActions\n) => SelectState\n\nconst defaultMultiValue: any[] = []\nconst defaultOptions: Option[] = []\n\nconst initialState: SelectState = {\n  searchValue: '',\n  resolvedSearchValue: '',\n  isOpen: false,\n  highlightedIndex: 0,\n}\n\nfunction scrollIntoView(node: any, optionsNode: any) {\n  if (!node || !optionsNode) {\n    return\n  }\n  const actions = computeScrollIntoView(node, {\n    boundary: optionsNode,\n    block: 'nearest',\n    scrollMode: 'if-needed',\n  })\n  actions.forEach(({ el, top, left }) => {\n    el.scrollTop = top\n    el.scrollLeft = left\n  })\n}\nconst defaultStateReducer: StateReducer = (_, newState) => newState\nconst defaultScrollToIndex: ScrollToIndex = (\n  _,\n  inputRef,\n  optionsRef,\n  enabledRef\n) => {\n  if (enabledRef.current) {\n    scrollIntoView(inputRef.current, optionsRef.current)\n  }\n}\nexport const labelFromValue = (value: string): string =>\n  `${value.charAt(0).toUpperCase()}${value.substring(1)}`\nexport const idFromOption = (option: Option, prefix = ''): string =>\n  `${prefix}${option?.value}`\nconst defaultGetOption: GetOption = (option) =>\n  typeof option === 'string'\n    ? { value: option, label: labelFromValue(option) }\n    : option\nconst defaultGetDebounce: GetDebounce = (options) =>\n  options.length > 10000 ? 1000 : options.length > 1000 ? 200 : 0\n\nconst defaultFilterFn: SelectFilter = (options, searchValue, getOption) => {\n  return options\n    .filter((option) =>\n      getOption(option)\n        .value.toString()\n        .toLowerCase()\n        .includes(searchValue.toString().toLowerCase())\n    )\n    .sort((a) => {\n      return getOption(a)\n        .value.toString()\n        .toLowerCase()\n        .indexOf(searchValue.toString().toLowerCase())\n    })\n}\n\nfunction useDebounce(fn: AnyFunc, time = 0) {\n  const ref = useRef(null)\n  const fnRef = useRef()\n\n  fnRef.current = fn as any\n\n  useEffect(() => {\n    return () => {\n      clearTimeout(ref.current as unknown as number)\n    }\n  }, [time])\n\n  return useCallback(\n    async (...args: any[]) => {\n      if (ref.current) {\n        clearTimeout(ref.current as unknown as number)\n      }\n      return new Promise((resolve, reject) => {\n        ref.current = setTimeout(() => {\n          ref.current = null\n          try {\n            resolve((fnRef.current as unknown as AnyFunc)(...args))\n          } catch (err) {\n            reject(err)\n          }\n        }, time) as any\n      })\n    },\n    [time]\n  )\n}\n\nfunction updateReducerState(state: any, newValue: any, key?: string): any {\n  if (!key) {\n    if (typeof newValue === 'function') {\n      return newValue(state)\n    }\n    return newValue\n  }\n  if (typeof newValue === 'function') {\n    const next = {\n      ...state,\n      [key]: newValue(state[key]),\n    }\n    return next\n  }\n  return {\n    ...state,\n    [key]: newValue,\n  }\n}\nfunction useHoistedState(\n  initialState: SelectState,\n  reducer: StateReducer\n): [SelectState, SelectStateUpdater] {\n  const reducerRef = useRef()\n  ;(reducerRef.current as any) = reducer\n  const [state, _setState] = useState(initialState)\n  const setState = useCallback(\n    (updater: (old: SelectState) => SelectState, action: SelectActions) => {\n      if (!action) {\n        throw new Error('An action type is required to update the state')\n      }\n      return _setState((old: SelectState) =>\n        (reducerRef.current as unknown as StateReducer)(\n          old,\n          updater(old),\n          action\n        )\n      )\n    },\n    [_setState]\n  )\n  return [state, setState]\n}\n\nconst useKeys = (userKeys: {\n  [K in EventKeys]: (opts: { shift: any; meta: any }, e?: any) => K | any\n}) => {\n  return ({ onKeyDown, ...rest } = {} as any) => {\n    return {\n      ...rest,\n      onKeyDown: (e: KeyboardEvent) => {\n        const { keyCode, key, shiftKey: shift, metaKey: meta } = e\n        const handler = userKeys[key] || userKeys[keyCode]\n        if (handler) {\n          handler(\n            {\n              keyCode,\n              key,\n              shift,\n              meta,\n            },\n            e\n          )\n        }\n        if (onKeyDown) {\n          onKeyDown(e)\n        }\n      },\n    }\n  }\n}\n\nexport enum SelectionVisibilityMode {\n  List = 'list',\n  Input = 'input',\n  Both = 'both',\n}\nexport interface UseMultiSelectProps {\n  value?: string | string[]\n  options: Option[]\n  onChange?: SelectOnChange\n  getOption?: GetOption\n}\nexport interface UseMultiSelectReturn {\n  value?: string | string[]\n  options: Option[]\n  onChange?: SelectOnChange\n}\nexport interface UseSelectProps extends UsePopperProps {\n  onChange: SelectOnChange\n  single?: boolean\n  create?: boolean\n  selectionVisibleIn?: SelectionVisibilityMode\n  duplicates?: boolean\n  options?: Option[]\n  value?: any\n  shiftAmount?: number\n  getOption?: GetOption\n  getDebounce?: GetDebounce\n  stateReducer?: StateReducer\n  scrollToIndex?: ScrollToIndex\n  filterFn?: SelectFilter\n}\nexport interface UseSelectReturn {\n  value: any\n  multi: boolean\n  searchValue: string\n  isOpen: boolean\n  selectedOption: Option\n  visibleOptions: Option[]\n  selectionVisibleIn: SelectionVisibilityMode\n  selectIndex: (index: number) => any\n  highlightIndex: (value: any) => any\n  highlightedValueRef: MutableRefObject<HTMLElement | undefined>\n  highlightedIndexRef: MutableRefObject<number>\n  enableScrollRef: MutableRefObject<boolean>\n  removeValue: SelectRemoveValue\n  setOpen: SelectSetOpen\n  setSearch: SelectSetSearch\n  popper: UsePopperReturn\n  getInputProps: AnyFunc\n  getOptionProps: AnyFunc\n  getOption: GetOption\n  optionsRef: MutableRefObject<any>\n  controlRef: MutableRefObject<any>\n  clearAll: () => void\n  clearable: boolean\n}\n\nconst [SelectProvider, useSelectContext] = createContext<UseSelectReturn>({\n  strict: false,\n  name: 'SelectContext',\n})\nconst [SelectInputProvider, useSelectInputContext] = createContext<\n  Pick<UseSelectReturn, 'getInputProps'>\n>({\n  strict: false,\n  name: 'SelectInputContext',\n})\nconst [SelectedProvider, useSelectedContext] = createContext<\n  Pick<UseSelectReturn, 'removeValue'>\n>({\n  strict: false,\n  name: 'SelectedContext',\n})\nconst [SelectedListProvider, useSelectedListContext] = createContext<\n  Pick<UseSelectReturn, 'value' | 'multi' | 'selectionVisibleIn'>\n>({\n  strict: false,\n  name: 'SelectedListContext',\n})\nconst [SelectActionProvider, useSelectActionContext] = createContext<\n  Pick<UseSelectReturn, 'isOpen' | 'setOpen' | 'clearable' | 'clearAll'>\n>({\n  strict: false,\n  name: 'SelectActionContext',\n})\n\nexport {\n  SelectProvider,\n  SelectInputProvider,\n  SelectedProvider,\n  SelectedListProvider,\n  SelectActionProvider,\n  useSelectContext,\n  useSelectedContext,\n  useSelectedListContext,\n  useSelectInputContext,\n  useSelectActionContext,\n}\n\nexport function useSelect({\n  create = false,\n  single = false,\n  selectionVisibleIn = SelectionVisibilityMode.Input,\n  getDebounce = defaultGetDebounce,\n  getOption = defaultGetOption,\n  stateReducer = defaultStateReducer,\n  filterFn = defaultFilterFn,\n  scrollToIndex = defaultScrollToIndex,\n  shiftAmount = 5,\n  duplicates,\n  options,\n  value,\n  onChange,\n  placement = 'bottom-start',\n}: UseSelectProps): UseSelectReturn {\n  const [\n    { searchValue, resolvedSearchValue, isOpen, highlightedIndex },\n    setState,\n  ] = useHoistedState(initialState, stateReducer)\n\n  const multi = !single\n\n  // Refs\n\n  const optionsRef = useRef()\n  const optionsItemsRef = useRef<Option[]>([])\n  const valueRef = useRef<string | Array<string>>('')\n  const inputRef = useRef()\n  const controlRef = useRef()\n  const onBlurRef = useRef({})\n  const onChangeRef = useRef()\n  const filterFnRef = useRef()\n  const scrollToIndexRef = useRef()\n  const highlightedIndexRef = useRef<number>(highlightedIndex)\n  const highlightedValueRef = useRef<HTMLElement | undefined>()\n  const enableScrollRef = useRef(false)\n\n  const popper = usePopper({\n    placement,\n  })\n\n  highlightedIndexRef.current = highlightedIndex\n  ;(filterFnRef.current as any) = filterFn\n  ;(scrollToIndexRef.current as any) = scrollToIndex\n  ;(onChangeRef.current as any) = onChange\n\n  // Multi should always at least have an empty array as the value\n  if (multi && typeof value === 'undefined') {\n    value = defaultMultiValue\n  }\n\n  // If no options are provided, then use an empty array\n  if (!options) {\n    options = defaultOptions\n  }\n\n  const originalOptions = options\n\n  // If multi and duplicates aren't allowed, filter out the\n  // selected options from the options list\n  options = useMemo(() => {\n    // if selectionVisibleIn list || both set a selected value and don't filter\n    if (selectionVisibleIn !== SelectionVisibilityMode.Input) {\n      return options?.map((d) => ({\n        ...getOption(d),\n        selected: (Array.isArray(value) ? value : [value || ''])?.some(\n          (v: any) => getOption(v).value === getOption(d).value\n        ),\n      }))\n    }\n\n    // otherwise\n    if (multi && !duplicates) {\n      return options?.filter(\n        (d) =>\n          !value?.some((v: any) => getOption(v).value === getOption(d).value)\n      )\n    }\n    return options\n  }, [options, value, duplicates, multi, getOption, selectionVisibleIn])\n\n  // Compute the currently selected option(s)\n  const selectedOption = useMemo(() => {\n    if (!multi) {\n      return (\n        originalOptions.find(\n          (d) => getOption(d).value === getOption(value).value\n        ) || getOption(value)\n      )\n    } else {\n      return value.map(\n        (val: any) =>\n          originalOptions.find(\n            (d) => getOption(d).value === getOption(val).value\n          ) || getOption(val)\n      )\n    }\n  }, [multi, value, originalOptions, getOption])\n\n  // If there is a search value, filter the options for that value\n  // This needs to be reworked to handle async loading\n  options = useMemo(() => {\n    if (resolvedSearchValue) {\n      return (filterFnRef.current as any)?.(\n        options,\n        resolvedSearchValue,\n        getOption\n      )\n    }\n    return options\n  }, [options, resolvedSearchValue, getOption])\n\n  // If in create mode and we have a search value, fabricate\n  // an option for that searchValue and prepend it to options\n  options = useMemo(() => {\n    if (create && searchValue) {\n      return [{ created: true, ...getOption(searchValue) }, ...options!]\n    }\n    return options\n  }, [create, searchValue, options, getOption])\n\n  valueRef.current = value\n  optionsItemsRef.current = options as Option[]\n\n  // Actions\n\n  const setOpen = useCallback((newIsOpen: boolean) => {\n    setState(\n      (old) => updateReducerState(old, newIsOpen, 'isOpen'),\n      SelectActions.SetOpen\n    )\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const Close = useCallback(() => {\n    setOpen(false)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const Open = useCallback(() => {\n    setOpen(true)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const setResolvedSearch = useDebounce((value) => {\n    setState(\n      (old) => updateReducerState(old, value, 'resolvedSearchValue'),\n      SelectActions.SetSearch\n    )\n  }, getDebounce(options!))\n\n  const setSearch = useCallback((value: string) => {\n    setState(\n      (old) => updateReducerState(old, value, 'searchValue'),\n      SelectActions.SetSearch\n    )\n    setResolvedSearch(value)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const highlightIndex = useCallback(\n    (value: number | ((prev: number) => number)) => {\n      const _options = optionsItemsRef.current\n      setState((old) => {\n        return {\n          ...old,\n          highlightedIndex: Math.min(\n            Math.max(\n              0,\n              typeof value === 'function' ? value(old.highlightedIndex) : value\n            ),\n            _options.length - 1\n          ),\n        }\n      }, SelectActions.HighlightIndex)\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  )\n\n  const selectIndex = useCallback(\n    (index: number) => {\n      const option = optionsItemsRef.current![index]\n      if (option) {\n        const selectedOption = getOption(option) as any\n\n        if (!multi) {\n          ;(onChangeRef.current as any)?.(selectedOption.value, {\n            action: selectedOption.created\n              ? ChangeActions.SingleCreate\n              : ChangeActions.SingleSelect,\n            value: selectedOption,\n          })\n        } else {\n          const _value = valueRef.current as Array<string>\n          if (\n            duplicates ||\n            !_value.some(\n              (v: any) => getOption(v).value === selectedOption.value\n            )\n          ) {\n            ;(onChangeRef.current as any)?.([..._value, selectedOption.value], {\n              action: selectedOption.created\n                ? ChangeActions.MultiCreate\n                : ChangeActions.MultiSelect,\n              value: selectedOption,\n            })\n          }\n        }\n      }\n\n      if (create || multi) {\n        setSearch('')\n      }\n      if (!multi) {\n        Close()\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [multi, create, duplicates, getOption]\n  )\n\n  const clearAll = useCallback(() => {\n    ;(onChangeRef.current as any)?.(multi ? [] : '', {\n      action: multi ? ChangeActions.MultiClear : ChangeActions.SingleClear,\n      value: '',\n    })\n  }, [multi])\n\n  const removeValue = useCallback(\n    (v: number | string) => {\n      const isIndex = typeof v === 'number'\n      const _multi = Array.isArray(valueRef.current)\n      const _value = (\n        _multi ? valueRef.current : [valueRef.current]\n      ) as Array<string>\n      const _next = _value.filter((_v: string, i: number) =>\n        isIndex ? i !== v : v !== _v\n      )\n      if (_multi) {\n        ;(onChangeRef.current as any)(_next, {\n          action: ChangeActions.MultiRemove,\n          value: getOption(isIndex ? _value[v] : v),\n        })\n      } else {\n        ;(onChangeRef.current as any)(_next[0] || '', {\n          action: ChangeActions.SingleRemove,\n          value: getOption(isIndex ? _value[v] : v),\n        })\n      }\n    },\n    [getOption]\n  )\n\n  // Handlers\n\n  const handleSearchValueChange = useCallback((e: any) => {\n    setSearch(e.target.value)\n    Open()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const handleSearchClick = useCallback(() => {\n    if (!create || multi) {\n      setSearch('')\n    }\n    Open()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [create, multi])\n\n  // Prop Getters\n\n  const ArrowUp =\n    (defaultShift?: any, defaultMeta?: any) =>\n    ({ shift, meta }: any, e: any) => {\n      e.preventDefault()\n      const amount =\n        defaultMeta || meta\n          ? 1000000000000\n          : defaultShift || shift\n          ? shiftAmount - 1\n          : 1\n      Open()\n      enableScrollRef.current = true\n      highlightIndex((old: number) => old - amount)\n    }\n\n  const ArrowDown =\n    (defaultShift?: any, defaultMeta?: any) =>\n    ({ shift, meta }: any, e: any) => {\n      e.preventDefault()\n      const amount =\n        defaultMeta || meta\n          ? 1000000000000\n          : defaultShift || shift\n          ? shiftAmount - 1\n          : 1\n      Open()\n      enableScrollRef.current = true\n      highlightIndex((old: number) => old + amount)\n    }\n\n  const Enter = useCallback(\n    (_: any, e: any) => {\n      if (isOpen) {\n        const _options = optionsItemsRef.current\n        if (searchValue || _options![highlightedIndexRef!.current as number]) {\n          e.preventDefault()\n        }\n        if (_options![highlightedIndexRef!.current as number]) {\n          selectIndex(highlightedIndexRef!.current as number)\n        }\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [isOpen, searchValue]\n  )\n\n  const Backspace = useCallback(() => {\n    const _value = valueRef.current\n    const lastValue = multi ? _value[_value.length - 1] : _value\n    if ((multi && !searchValue) || (!multi && lastValue)) {\n      removeValue(lastValue as string)\n      setSearch('')\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [searchValue, multi])\n\n  const getKeyProps = useKeys({\n    ArrowUp: ArrowUp(),\n    ArrowDown: ArrowDown(),\n    PageUp: ArrowUp(true),\n    PageDown: ArrowDown(true),\n    Home: ArrowUp(false, true),\n    End: ArrowDown(false, true),\n    Escape: Close,\n    Tab: Close,\n    Enter,\n    Backspace,\n  } as any)\n\n  const getInputProps = useCallback(\n    (\n      {\n        refKey = 'ref',\n        ref,\n        onChange,\n        onFocus,\n        onClick,\n        onBlur,\n        ...rest\n      } = {} as any\n    ) => {\n      return getKeyProps({\n        [refKey]: (el: HTMLElement) => {\n          ;(inputRef.current as any) = el\n          if (ref) {\n            ref.current = el\n          }\n        },\n        value:\n          (isOpen\n            ? searchValue || selectedOption.label\n            : selectedOption\n            ? selectedOption?.label\n            : '') || '',\n        onChange: (e: any) => {\n          handleSearchValueChange(e)\n          if (onChange) {\n            onChange(e)\n          }\n        },\n        onFocus: (e: any) => {\n          handleSearchClick()\n          if (onFocus) {\n            onFocus(e)\n          }\n        },\n        onClick: (e: any) => {\n          handleSearchClick()\n          if (onClick) {\n            onClick(e)\n          }\n        },\n        onBlur: (e: any) => {\n          if (onBlur) {\n            e.persist()\n            ;(onBlurRef.current as any).cb = onBlur\n            ;(onBlurRef.current as any).event = e\n          }\n        },\n        ...rest,\n      })\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      isOpen,\n      searchValue,\n      selectedOption,\n      handleSearchClick,\n      handleSearchValueChange,\n    ]\n  )\n\n  const getOptionProps = useCallback(\n    (\n      { index, key = index, onClick, onMouseEnter, option, ...rest } = {} as any\n    ) => {\n      if (typeof index !== 'number' || index < 0) {\n        throw new Error(\n          `useSelect: The getOptionProps prop getter requires an index property, eg. 'getOptionProps({index: 1})'`\n        )\n      }\n\n      return {\n        key,\n        option,\n        ...rest,\n        onClick: (e: any) => {\n          if (option.selected !== undefined && option.selected) {\n            removeValue(option.value)\n          } else {\n            selectIndex(index)\n          }\n          if (onClick) {\n            onClick(e)\n          }\n        },\n        onMouseEnter: (e: any) => {\n          enableScrollRef.current = false\n          highlightIndex(index)\n          if (onMouseEnter) {\n            onMouseEnter(e)\n          }\n        },\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  )\n\n  // Effects\n\n  // When the user clicks outside of the options box or input\n  // while open, we need to close the dropdown\n  useClickOutsideRef(isOpen, Close, optionsRef!, controlRef!)\n\n  // When searching, activate the first option\n  useEffect(() => {\n    if (searchValue) {\n      highlightIndex(0)\n    }\n  }, [searchValue, highlightIndex])\n\n  // When we open and close the options, set the highlightedIndex to 0\n  useEffect(() => {\n    highlightIndex(0)\n\n    if (!isOpen && (onBlurRef.current as any)?.event) {\n      ;(onBlurRef.current as any)?.cb((onBlurRef.current as any).event)\n      ;(onBlurRef.current as any).event = null\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen])\n\n  // When the highlightedIndex changes, scroll to that item\n  useEffect(() => {\n    ;(scrollToIndexRef.current as any)?.(\n      highlightedIndex,\n      highlightedValueRef,\n      optionsRef,\n      enableScrollRef\n    )\n  }, [highlightedIndex])\n\n  useEffect(() => {\n    if (isOpen && inputRef.current) {\n      setTimeout(() => {\n        ;(inputRef.current as any)?.focus()\n      })\n    }\n  }, [isOpen])\n\n  return {\n    multi,\n    clearable: multi && !!(Array.isArray(value) ? value.length > 0 : !!value),\n    clearAll,\n    optionsRef,\n    controlRef,\n    popper,\n    // State\n    value,\n    searchValue,\n    isOpen,\n    highlightedIndexRef,\n    highlightedValueRef,\n    enableScrollRef,\n    selectedOption,\n    visibleOptions: options!,\n    selectionVisibleIn,\n    // Actions\n    selectIndex,\n    removeValue,\n    setOpen,\n    setSearch,\n    highlightIndex,\n    // Prop Getters\n    getInputProps,\n    getOptionProps,\n    getOption,\n  }\n}\n\nfunction useClickOutsideRef(\n  enable: boolean,\n  fn: AnyFunc,\n  dropdownRef: MutableRefObject<any>,\n  controlRef: MutableRefObject<any>\n): void {\n  const localDropdownRef = useRef()\n  const localControlRef = useRef()\n  const fnRef = useRef()\n\n  ;(fnRef.current as any) = fn\n  const elDropdownRef =\n    dropdownRef ||\n    (localDropdownRef as unknown as MutableRefObject<HTMLElement>)\n  const elControlRef =\n    controlRef || (localControlRef as unknown as MutableRefObject<HTMLElement>)\n\n  const handle = useCallback((e: TouchEvent | MouseEvent) => {\n    const isTouch = e.type === 'touchstart'\n    if (e.type === 'click' && isTouch) {\n      return\n    }\n\n    const elControl = elControlRef.current as HTMLElement\n    const elDropdown = elDropdownRef.current as HTMLElement\n    if (\n      !(\n        elControl?.contains((e as any).target) ||\n        elDropdown?.contains((e as any).target)\n      )\n    ) {\n      ;(fnRef.current as any)(e)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  useEffect(() => {\n    if (enable) {\n      document.addEventListener('touchstart', handle, true)\n      document.addEventListener('click', handle, true)\n    }\n\n    return () => {\n      document.removeEventListener('touchstart', handle, true)\n      document.removeEventListener('click', handle, true)\n    }\n  }, [enable, handle])\n}\n\nexport function useSelectActionGroup(props: any = {}) {\n  const { clearAll, clearable } = useSelectActionContext()\n  const styles = useStyles()\n\n  const clearOnClick = useCallback((e: MouseEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    clearAll()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return {\n    ...props,\n    clearOnClick,\n    clearable,\n    __css: styles.actionGroup,\n  }\n}\n\nexport function useSelectInput(props: any = {}) {\n  const { getInputProps } = useSelectInputContext()\n  const styles = useStyles()\n\n  return {\n    ...props,\n    ...getInputProps(),\n    __css: styles.input,\n  }\n}\nexport function useSelectLabel(props: any = {}) {\n  const styles = useStyles()\n\n  return {\n    ...props,\n    __css: styles.label,\n  }\n}\n\nexport function useSelectButton(props: any = {}) {\n  const { isOpen, setOpen } = useSelectActionContext()\n  const onClick = useCallback(\n    (e: MouseEvent) => {\n      e.preventDefault()\n      e.stopPropagation()\n      ;(setOpen as any)((o: any) => !o)\n    },\n    [setOpen]\n  )\n  const styles = useStyles()\n\n  return {\n    ...props,\n    __css: {\n      ...styles.button,\n      ...(isOpen && (styles.button as any))?._active,\n    },\n    isOpen,\n    onClick,\n  }\n}\n\nexport function useClearButton(props: any = {}) {\n  const styles = useStyles()\n\n  return {\n    ...props,\n    __css: {\n      ...styles.button,\n    },\n  }\n}\n\nexport function useSelectedItem(props: any = {}) {\n  const { removeValue } = useSelectedContext()\n  const styles = useStyles()\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const onClick = useCallback(() => removeValue(props.value), [props.value])\n\n  return useMemo(\n    () => ({\n      key: props.key || props.value,\n      onClick,\n      __css: styles.selectedItem,\n    }),\n    [props.value, props.key, onClick, styles.selectedItem]\n  )\n}\n\nexport function useSelectItem({ selected, ...props }: any = {}) {\n  const { getOptionProps, highlightedIndexRef, highlightedValueRef } =\n    useSelectContext()\n  const styles = useStyles()\n  const highlighted = highlightedIndexRef.current === props.index\n\n  return useMemo(() => {\n    const option = {\n      value: props.value,\n      label: props.label || labelFromValue(props.value),\n      selected,\n    }\n    return {\n      ...getOptionProps!({\n        option,\n        key: props.key || idFromOption(option),\n        index: props.index,\n      }),\n      highlightedRef: highlighted ? highlightedValueRef : undefined,\n      __css: {\n        ...styles.item,\n        ...(selected && (styles.item as any))?._selected,\n        ...(highlighted && (styles.item as any))?._active,\n      },\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    highlighted,\n    selected,\n    props.key,\n    props.label,\n    props.value,\n    props.index,\n    styles.item,\n  ])\n}\n\nexport function useSelectList() {\n  const { isOpen, getOption, optionsRef, popper, visibleOptions } =\n    useSelectContext()\n  const styles = useStyles()\n\n  return useMemo(\n    () => ({\n      ref: mergeRefs(optionsRef, popper.popperRef),\n      isOpen,\n      visibleOptions,\n      getOption,\n      __css: styles.list,\n    }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [isOpen, visibleOptions, styles.list]\n  )\n}\n\nexport function useSelectedList(props: any = {}) {\n  const {\n    value: selectedItems,\n    multi,\n    selectionVisibleIn,\n  } = useSelectedListContext()\n  const styles = useStyles()\n\n  return {\n    ...props,\n    multi,\n    selectedItems,\n    selectionVisibleIn,\n    __css: styles.selectedList,\n    textList: {\n      __css: styles.textList,\n    },\n  }\n}\n\nexport function useSelectControl(props: any = {}) {\n  const { isOpen, popper, controlRef } = useSelectContext()\n  const styles = useStyles()\n\n  return {\n    ...props,\n    ...useMemo(\n      () => ({\n        ref: mergeRefs(props.ref, controlRef, popper.referenceRef),\n      }),\n      [props.ref, controlRef, popper.referenceRef]\n    ),\n    isOpen,\n    __css: styles.control,\n  }\n}\n\nexport function useMultiSelect(\n  props: UseMultiSelectProps = {} as UseMultiSelectProps\n): UseMultiSelectReturn {\n  const getOption = props.getOption || defaultGetOption\n  const [value, setValue] = useState(props.value)\n  const [options, setOptions] = useState<Option[]>(() =>\n    props.options.map(getOption)\n  )\n  const onChange = useCallback<SelectOnChange>(\n    (next, change) => {\n      switch (change?.action) {\n        case ChangeActions.SingleCreate:\n          setValue(next as string)\n          setOptions((o) => {\n            const opt = getOption(next as any)\n            return o.some((_o) => getOption(_o).value === opt.value)\n              ? o\n              : [{ ...opt, created: true }, ...o]\n          })\n          break\n        case ChangeActions.SingleClear:\n        case ChangeActions.SingleRemove:\n          setValue(next as string)\n          break\n        case ChangeActions.SingleSelect:\n          setValue(next as string)\n          break\n        case ChangeActions.MultiCreate:\n          const nextValue = next as string[]\n          const created = next[nextValue.length - 1]\n          setValue(nextValue)\n          setOptions((o) => {\n            const opt = getOption(created as any)\n            return o.some((_o) => getOption(_o).value === opt.value)\n              ? o\n              : [{ ...opt, created: true }, ...o]\n          })\n          break\n        case ChangeActions.MultiClear:\n        case ChangeActions.MultiRemove:\n          setValue(next as string[])\n          break\n        case ChangeActions.MultiSelect:\n        default:\n          setValue(next as string[])\n      }\n    },\n    [setValue, setOptions, getOption]\n  )\n\n  return {\n    value,\n    options,\n    onChange,\n  }\n}\n","import {\n  HTMLChakraProps,\n  Input,\n  Box,\n  IconButton,\n  chakra,\n  HStack,\n  omitThemingProps,\n  useMultiStyleConfig,\n  StylesProvider,\n  forwardRef,\n  Tag,\n  TagLabel,\n  TagCloseButton,\n  TagProps,\n  StackProps,\n  useStyles,\n  BoxProps,\n  IconButtonProps,\n} from '@chakra-ui/react'\nimport { FC, memo, ReactNode, useCallback, useMemo } from 'react'\nimport {\n  SelectProvider,\n  useSelect,\n  useSelectButton,\n  useSelectActionGroup,\n  useSelectControl,\n  useSelectInput,\n  useSelectedItem,\n  useSelectItem,\n  useSelectLabel,\n  useSelectList,\n  useSelectedList,\n  UseSelectProps,\n  idFromOption,\n  labelFromValue,\n  SelectedProvider,\n  SelectInputProvider,\n  SelectedListProvider,\n  SelectActionProvider,\n  SelectionVisibilityMode,\n  useClearButton,\n} from './use-select'\n\n// @see https://github.com/chakra-ui/chakra-ui/issues/140\n\nexport interface SelectItem {\n  value: any\n  label?: string\n}\n\nexport interface SelectProps\n  extends Omit<\n      HTMLChakraProps<'select'>,\n      'value' | 'size' | 'onChange' | 'onSelect' | 'children'\n    >,\n    UseSelectProps {\n  label?: string\n  children?: ReactNode\n}\n\nexport interface SelectControlProps\n  extends Omit<HTMLChakraProps<'select'>, 'size'> {\n  defaultIsOpen?: boolean\n  isLazy?: true\n  closeOnSelect?: false\n  children?: ReactNode\n}\n\nexport type SelectListProps = HTMLChakraProps<'ul'>\nexport type SelectedListProps = BoxProps\nexport type SelectLabelProps = HTMLChakraProps<'label'>\nexport interface SelectActionGroupProps extends StackProps {\n  clearButtonProps?: IconButtonProps\n  toggleButtonProps?: IconButtonProps\n}\n\nexport interface SelectOptionItemProps extends HTMLChakraProps<'li'> {\n  highlighted?: boolean\n  label?: string\n  index: number\n  selected?: boolean\n  created?: boolean\n}\n\nexport interface SelectedItemProps extends TagProps, SelectItem {}\n\nexport interface MultiSelectProps extends Omit<SelectProps, 'children'> {\n  children?: ReactNode\n  labelProps?: SelectLabelProps\n  controlProps?: SelectControlProps\n  listProps?: SelectListProps\n  selectedListProps?: SelectedListProps\n  actionGroupProps?: SelectActionGroupProps\n}\n\nexport const ChakraSvg = chakra('svg')\n\nexport const Select = memo<SelectProps>((props) => {\n  const { children } = props\n\n  const styles = useMultiStyleConfig('MultiSelect', props)\n  const ownProps = omitThemingProps(props as any)\n\n  const ctx = useSelect(ownProps as any)\n  const context = useMemo(() => ctx, [ctx])\n  const selectInputContext = useMemo(\n    () => ({ getInputProps: ctx.getInputProps }),\n    [ctx.getInputProps]\n  )\n  const selectedContext = useMemo(\n    () => ({ removeValue: ctx.removeValue }),\n    [ctx.removeValue]\n  )\n  const selectedListContext = useMemo(\n    () => ({\n      value: ctx.value,\n      multi: ctx.multi,\n      selectionVisibleIn: ctx.selectionVisibleIn,\n    }),\n    [ctx.value, ctx.multi, ctx.selectionVisibleIn]\n  )\n  const selectActionContext = useMemo(\n    () => ({\n      isOpen: ctx.isOpen,\n      setOpen: ctx.setOpen,\n      clearable: ctx.clearable,\n      clearAll: ctx.clearAll,\n    }),\n    [ctx.isOpen, ctx.setOpen, ctx.clearable, ctx.clearAll]\n  )\n\n  return (\n    <StylesProvider value={styles}>\n      <SelectProvider value={context}>\n        <SelectInputProvider value={selectInputContext}>\n          <SelectedListProvider value={selectedListContext}>\n            <SelectedProvider value={selectedContext}>\n              <SelectActionProvider value={selectActionContext}>\n                <chakra.div pos='relative'>{children}</chakra.div>\n              </SelectActionProvider>\n            </SelectedProvider>\n          </SelectedListProvider>\n        </SelectInputProvider>\n      </SelectProvider>\n    </StylesProvider>\n  )\n})\nSelect.displayName = 'Select'\n\nexport const SelectLabel = memo<SelectLabelProps>((props) => {\n  const labelProps = useSelectLabel()\n\n  return <chakra.label {...props} {...labelProps} />\n})\nSelectLabel.displayName = 'SelectLabel'\n\nexport const SelectOptionLabel = memo<\n  StackProps & { label: string; created?: boolean }\n>(({ label, created }) => (\n  <HStack justifyContent='space-between' w='full' role='list'>\n    <Box>{label}</Box>\n    {!!created && (\n      <Tag flexShrink={0}>\n        <TagLabel fontSize='xs' fontWeight='bold' role='listitem'>\n          New\n        </TagLabel>\n      </Tag>\n    )}\n  </HStack>\n))\nSelectOptionLabel.displayName = 'SelectOptionLabel'\n\nexport const SelectOptionItem = memo<SelectOptionItemProps>(\n  ({ value, label, index, selected, created, ...props }) => {\n    const { highlightedRef, option, ...itemProps } = useSelectItem({\n      value,\n      label,\n      index,\n      selected,\n    })\n\n    return (\n      <chakra.li\n        ref={highlightedRef && highlightedRef}\n        role='option'\n        {...(selected && { 'aria-selected': selected })}\n        {...props}\n        {...itemProps}\n      >\n        <SelectOptionLabel label={option?.label || value} created={!!created} />\n      </chakra.li>\n    )\n  }\n)\nSelectOptionItem.displayName = 'SelectOptionItem'\n\nexport const EmptySelectResults = memo<{ label?: string }>(\n  ({ label = 'No results found' }) => {\n    const styles = useStyles()\n    return (\n      <chakra.li __css={styles.item}>\n        <SelectOptionLabel label={label} />\n      </chakra.li>\n    )\n  }\n)\nEmptySelectResults.displayName = 'EmptySelectResults'\n\nexport const SelectList = memo<SelectListProps>((props) => {\n  const {\n    __css,\n    visibleOptions,\n    isOpen,\n    getOption,\n    ref: listRef,\n    ...listProps\n  } = useSelectList()\n\n  const dropdownVisible = isOpen\n  const optionItemProps = useCallback((option: string, index: number) => {\n    const optionItem = getOption(option) as any\n    return {\n      key: optionItem.id || idFromOption(optionItem, 'option-'),\n      value: optionItem.value,\n      label: optionItem.label || labelFromValue(optionItem.value),\n      selected: optionItem.selected,\n      created: optionItem.created,\n      index,\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <chakra.ul\n      ref={listRef}\n      __css={useMemo(\n        () => ({\n          listStyle: 'none',\n          position: 'absolute',\n          ...(!dropdownVisible && { display: 'none' }),\n          ...__css,\n        }),\n        [dropdownVisible, __css]\n      )}\n      aria-orientation='vertical'\n      role='listbox'\n      {...listProps}\n      {...props}\n    >\n      {dropdownVisible && visibleOptions.length > 0 ? (\n        visibleOptions.map((item: any, index: number) => {\n          const { key: itemKey, ...restItemProps } = optionItemProps(\n            item,\n            index\n          )\n          return <SelectOptionItem key={itemKey} {...restItemProps} />\n        })\n      ) : (\n        <EmptySelectResults />\n      )}\n    </chakra.ul>\n  )\n})\nSelectList.displayName = 'SelectList'\n\nconst SelectToggleIcon: FC<HTMLChakraProps<'svg'> & { isActive?: boolean }> = ({\n  isActive,\n  width = 4,\n  height = 4,\n  __css,\n  ...props\n}) => (\n  <ChakraSvg\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n    fill='none'\n    width={width}\n    height={height}\n    __css={{\n      ...__css,\n      ...(isActive && ((__css as any)?._active as any)),\n    }}\n    {...props}\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth='2'\n      d='M19 9l-7 7-7-7'\n    />\n  </ChakraSvg>\n)\n\nconst SelectClearIcon: FC<HTMLChakraProps<'svg'> & { isActive?: boolean }> = ({\n  width = 4,\n  height = 4,\n  ...props\n}) => (\n  <ChakraSvg\n    viewBox='0 0 24 24'\n    stroke='currentColor'\n    fill='none'\n    width={width}\n    height={height}\n    {...props}\n  >\n    <path\n      strokeLinecap='round'\n      strokeLinejoin='round'\n      strokeWidth='2'\n      d='M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z'\n    />\n  </ChakraSvg>\n)\n\nexport const SelectInput = memo((props) => {\n  const inputProps = useSelectInput(props)\n\n  return <chakra.input {...inputProps} />\n})\nSelectInput.displayName = 'SelectInput'\n\nexport const SelectedItem = memo<SelectedItemProps>(({ value, ...props }) => {\n  const { onClick, __css, ...itemProps } = useSelectedItem({\n    value,\n    ...props,\n  })\n\n  return (\n    <Tag {...(__css as any)} {...itemProps}>\n      <TagLabel>{value}</TagLabel>\n      <TagCloseButton onClick={onClick} />\n    </Tag>\n  )\n})\nSelectedItem.displayName = 'SelectedItem'\n\nexport const SelectToggleButton = memo<IconButtonProps>((props) => {\n  const {\n    __css,\n    size = 'sm',\n    ariaLabel = 'toggle menu',\n    icon: Icon = SelectToggleIcon,\n    isOpen,\n    ...buttonProps\n  } = useSelectButton(props)\n\n  return (\n    <IconButton\n      tabIndex={0}\n      size={size}\n      aria-label={ariaLabel}\n      aria-haspopup={true}\n      aria-expanded={isOpen}\n      icon={\n        <Icon\n          isActive={isOpen}\n          __css={{\n            transitionDuration: '200ms',\n            transitionProperty: 'transform',\n            _active: { transform: 'rotate(180deg)' },\n          }}\n        />\n      }\n      {...__css}\n      {...buttonProps}\n    />\n  )\n})\nSelectToggleButton.displayName = 'SelectToggleButton'\n\nexport const SelectClearButton = memo<IconButtonProps>((props) => {\n  const {\n    __css,\n    size = 'sm',\n    ariaLabel = 'clear all selected',\n    icon: Icon = SelectClearIcon,\n    ...buttonProps\n  } = useClearButton(props)\n\n  return (\n    <IconButton\n      tabIndex={0}\n      size={size}\n      aria-label={ariaLabel}\n      icon={<Icon />}\n      {...__css}\n      {...buttonProps}\n    />\n  )\n})\nSelectClearButton.displayName = 'SelectClearButton'\n\nexport const SelectedList = memo<SelectedListProps>(\n  ({ children, ...props }) => {\n    const {\n      __css,\n      textList,\n      selectedItems,\n      multi,\n      selectionVisibleIn,\n      ...selectedListProps\n    } = useSelectedList(props)\n\n    return (\n      <Box {...__css} {...selectedListProps}>\n        {multi && // Both || Input\n          selectionVisibleIn !== SelectionVisibilityMode.List &&\n          selectedItems?.map((selectedItem: any) => (\n            <SelectedItem\n              key={`selected-item-${selectedItem}`}\n              value={selectedItem}\n            />\n          ))}\n        {multi && // List only\n          selectionVisibleIn === SelectionVisibilityMode.List &&\n          !!selectedItems?.length && (\n            <Box {...textList?.__css}>{selectedItems?.join(', ')}</Box>\n          )}\n        {children}\n      </Box>\n    )\n  }\n)\nSelectedList.displayName = 'SelectedList'\n\nexport const SelectActionGroup = memo<SelectActionGroupProps>((props) => {\n  const {\n    __css,\n    clearable,\n    clearOnClick,\n    clearButtonProps,\n    toggleButtonProps,\n    ...toggleActionProps\n  } = useSelectActionGroup(props)\n\n  return (\n    <HStack {...__css} {...toggleActionProps}>\n      {clearable && (\n        <SelectClearButton onClick={clearOnClick} {...clearButtonProps} />\n      )}\n      <SelectToggleButton {...toggleButtonProps} />\n    </HStack>\n  )\n})\nSelectActionGroup.displayName = 'SelectActionGroup'\n\nexport const SelectControl = forwardRef<SelectControlProps, 'div'>(\n  ({ children, ...props }, ref) => {\n    const { ref: controlRef, __css } = useSelectControl({ ref })\n\n    return (\n      <Input ref={controlRef} as={HStack} {...__css} {...props}>\n        {children}\n      </Input>\n    )\n  }\n)\n\nexport const MultiSelect: FC<MultiSelectProps> = ({\n  label,\n  labelProps,\n  controlProps,\n  listProps,\n  selectedListProps,\n  actionGroupProps,\n  ...props\n}) => {\n  return (\n    <Select {...props}>\n      {label && <SelectLabel {...labelProps}>{label}</SelectLabel>}\n      <SelectControl {...controlProps}>\n        <SelectedList {...selectedListProps}>\n          <SelectInput />\n        </SelectedList>\n        <SelectActionGroup {...actionGroupProps} />\n      </SelectControl>\n      <SelectList {...listProps} />\n    </Select>\n  )\n}\n"],"names":["baseStyleList","props","bg","mode","boxShadow","color","w","py","zIndex","borderRadius","borderWidth","maxH","overflowY","overscrollBehaviorY","baseStyleSelectedList","d","flex","flexWrap","alignItems","baseStyleLabel","fontSize","marginEnd","mb","fontWeight","transition","opacity","_disabled","baseStyleItem","cursor","_focus","_active","_expanded","_selected","baseStyleSelectedItem","variant","colorscheme","baseStyleButton","_hover","baseStyleControl","h","minW","border","borderColor","my","theme","defaultProps","size","parts","sizes","sm","control","minH","px","spacing","input","m","actionGroup","item","textList","selectedItem","selectedList","groupTitle","mx","md","p","lg","baseStyle","list","button","baseStyleActionGroup","bgColor","appearance","outline","baseStyleGroupTitle","divider","baseStyleDivider","label","t","nodeType","e","n","clientHeight","scrollHeight","clientWidth","scrollWidth","r","getComputedStyle","overflowX","ownerDocument","defaultView","frameElement","i","o","l","ChangeActions","SelectActions","defaultMultiValue","defaultOptions","initialState","searchValue","resolvedSearchValue","isOpen","highlightedIndex","defaultStateReducer","_","newState","defaultScrollToIndex","inputRef","optionsRef","enabledRef","current","node","optionsNode","actions","window","scrollMode","block","u","inline","boundary","a","skipOverflowHiddenElements","c","TypeError","f","document","scrollingElement","documentElement","s","parentElement","push","body","visualViewport","width","innerWidth","g","height","innerHeight","scrollX","pageXOffset","v","scrollY","pageYOffset","W","getBoundingClientRect","b","H","y","top","E","right","M","bottom","V","left","x","I","C","T","length","k","B","D","O","R","X","Y","L","S","j","parseInt","borderLeftWidth","q","borderTopWidth","z","borderRightWidth","A","borderBottomWidth","F","G","J","offsetWidth","K","offsetHeight","Math","max","N","scrollLeft","P","scrollTop","min","el","computeScrollIntoView","forEach","scrollIntoView","labelFromValue","value","charAt","toUpperCase","substring","idFromOption","option","prefix","defaultGetOption","defaultGetDebounce","options","defaultFilterFn","getOption","filter","toString","toLowerCase","includes","sort","indexOf","updateReducerState","state","newValue","key","_extends","SelectionVisibilityMode","SelectProvider","useSelectContext","createContext","strict","name","SelectInputProvider","useSelectInputContext","SelectedProvider","useSelectedContext","SelectedListProvider","useSelectedListContext","SelectActionProvider","useSelectActionContext","useSelect","create","single","selectionVisibleIn","Input","getDebounce","stateReducer","filterFn","scrollToIndex","shiftAmount","duplicates","onChange","placement","setState","reducer","reducerRef","useRef","_setState","useState","useCallback","updater","action","Error","old","useHoistedState","multi","optionsItemsRef","valueRef","controlRef","onBlurRef","onChangeRef","filterFnRef","scrollToIndexRef","highlightedIndexRef","highlightedValueRef","enableScrollRef","popper","usePopper","originalOptions","useMemo","_options2","_options3","map","_ref2","selected","Array","isArray","some","_value2","selectedOption","val","find","created","setOpen","newIsOpen","SetOpen","Close","Open","setResolvedSearch","fn","time","ref","fnRef","useEffect","clearTimeout","async","args","Promise","resolve","reject","setTimeout","err","useDebounce","SetSearch","setSearch","highlightIndex","_options","HighlightIndex","selectIndex","index","_value","MultiCreate","MultiSelect","SingleCreate","SingleSelect","clearAll","MultiClear","SingleClear","removeValue","isIndex","_multi","_next","_v","MultiRemove","SingleRemove","handleSearchValueChange","target","handleSearchClick","ArrowUp","defaultShift","defaultMeta","shift","meta","preventDefault","amount","ArrowDown","Enter","Backspace","lastValue","getKeyProps","userKeys","PageUp","PageDown","Home","End","Escape","Tab","_ref","onKeyDown","rest","_objectWithoutPropertiesLoose","_excluded","keyCode","shiftKey","metaKey","handler","getInputProps","_ref3","refKey","onFocus","onClick","onBlur","_excluded2","persist","cb","event","getOptionProps","_ref4","onMouseEnter","_excluded3","undefined","enable","dropdownRef","localDropdownRef","localControlRef","elDropdownRef","elControlRef","handle","type","elControl","elDropdown","contains","addEventListener","removeEventListener","useClickOutsideRef","_onBlurRef$current2","_onBlurRef$current","_inputRef$current","focus","clearable","visibleOptions","useSelectActionGroup","styles","useStyles","clearOnClick","stopPropagation","__css","useSelectInput","useSelectLabel","useSelectButton","_ref5","useClearButton","useSelectedItem","useSelectItem","_ref6","_excluded4","highlighted","_ref7","_ref8","highlightedRef","useSelectList","mergeRefs","popperRef","useSelectedList","selectedItems","useSelectControl","referenceRef","useMultiSelect","setValue","setOptions","next","change","opt","_o","ChakraSvg","chakra","Select","memo","children","useMultiStyleConfig","ctx","omitThemingProps","context","selectInputContext","selectedContext","selectActionContext","_jsx","StylesProvider","selectedListContext","div","pos","displayName","SelectLabel","labelProps","SelectOptionLabel","_jsxs","HStack","justifyContent","role","Box","Tag","flexShrink","TagLabel","SelectOptionItem","_useSelectItem","itemProps","li","EmptySelectResults","SelectList","listRef","listProps","_useSelectList","dropdownVisible","optionItemProps","optionItem","id","ul","listStyle","position","display","itemKey","restItemProps","_optionItemProps","SelectToggleIcon","isActive","viewBox","stroke","fill","strokeLinecap","strokeLinejoin","strokeWidth","SelectInput","inputProps","SelectedItem","_excluded7","_useSelectedItem","_excluded8","TagCloseButton","SelectToggleButton","ariaLabel","icon","Icon","buttonProps","IconButton","tabIndex","transitionDuration","transitionProperty","transform","SelectClearButton","SelectClearIcon","_useClearButton","_excluded10","SelectedList","_excluded11","selectedListProps","_useSelectedList","_excluded12","List","join","SelectActionGroup","clearButtonProps","toggleButtonProps","toggleActionProps","SelectControl","forwardRef","_excluded14","as","controlProps","actionGroupProps"],"mappings":"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"}